### <a name="_b7urdng99y53"></a>**Название задачи:** Передача ставок в кол-центр
### <a name="_hjk0fkfyohdk"></a>**Автор:** Щуренков Максим
### <a name="_uanumrh8zrui"></a>**Дата:** 19.10.2025
### <a name="_3bfxc9a45514"></a>**Функциональные требования**

|**№**|**Действующие лица или системы**|**Use Case**|**Описание**|
| :-: | :- | :- | :- |
|UC1|Сотрудник кол-центра, CRM Кол-центра|Получение списка актуальных ставок|1. Сотрудник переход в CRM систему кол-центра<br/> 2. CRM Кол-центра показывает актуальную информацию по ставкам|
|UC2|Сотрудник партнёрского кол-центра, Система партнёрского кол-центра|Получение списка актуальных ставок|1. Сотрудник переход в систему кол-центра<br/> 2. Кол-центр показывает актуальную информацию по ставкам|

### <a name="_u8xz25hbrgql"></a>**Нефункциональные требования**
|**№**|**Требование**|
| :-: | :- |
|2|**Надёжность**:<br/> Режим работы 24/7;<br/> Доступность 99.9%|
|3|**Производительность**:<br/> Отклик - миллисекунды|
|4|**Поддерживаемость**:<br/> Документирование;<br/> Тестовая среда;<br/> Логирование;<br/> Мониторинг;<br/> Трассировка|
|6|**Технологии**:<br/> При выборе стека предпочтение отдаётся технологиям, уже используемым в банке;<br/> Брокер сообщейний - Kafka, но учитывая, что текущая версия платформы интернет-банка с ней несовместима;<br/> Наличие внутренней экспертизы по используемым технологиям |
|7|**Масштабируемость и отказоустойчивость**:<br/> Горизонтальное масштабирование и распределение запросов между серверами, приложениями и ЦОД|
|8|**Развёртывание и эксплуатация**:<br/> Все новые сервисы контейнеризированы(Docker);<br/> Все новые сервисы поддерживают оркестрацию(Kubernetes);<br/> CI/CD|
### <a name="_qmphm5d6rvi3"></a>**Решение**

[Диаграмма контекста](https://github.com/Maksina/architecture-pro-standart/blob/analyze/Task4/schemas/context/context.plantuml)

![Image Диаграмма контекста](https://github.com/Maksina/architecture-pro-standart/blob/analyze/Task4/schemas/context/context.png)

[Диаграмма контейнеров](https://github.com/Maksina/architecture-pro-standart/blob/analyze/Task4/schemas/container/container.plantuml)

![Image Диаграмма контейнеров](https://github.com/Maksina/architecture-pro-standart/blob/analyze/Task4/schemas/container/container.png)

**Архитектурные решения**:

1. **RateExportService**:

    *Причины*:
    - Соответствие DDD, сервис ответственный только за свою бизнес-функцию
    - Независимость к развитию и масштабированию

    *Сервисы*:
    - RateExportService - Периодическое формирование файла и запись в SFTP-сервер

    *Функции*:
    - Получение ставок из RateService
    - Формирование документа
    - Загрузка документа SFTP-Сервер
    - Логирование и трассировка

2. **SFTPServer**:

    *Причины*:
    - Ограничения внешней системы кол-центра

    *Функции*:
    - Хранение файла с информацией о депозитных ставках 
    - Изменение/чтение файла с информацией о депозитных ставках
    - Логирование и трассировка

### <a name="_bjrr7veeh80c"></a>**Альтернативы**

1. *Выгрузка файлов напрямую из RateService*

    - Преимущества:
        - Простота поддержки, ввиду уменьшения количества сервисов
        - Уменьшение издержек на разработку и инфраструктуру

    - Недостатки:
        - Отсутствие возможности гибкого масштабирования в зависимости от нагрузок
        - Размытие границ ответственности сервиса

**Недостатки, ограничения, риски**

1. Существует промежутки времени, в которых ставки на SFTP сервере могут быть не актуальны
2. Потребность в новой экспертизе: OpenSSH
3. Повышение издержек на поддержку инфраструктуры и сервисов